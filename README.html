<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>
README
</title>
    <style>
        body {
            font-family: "Microsoft JhengHei", "微軟正黑體", Arial, sans-serif;
            line-height: 1.6;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .container {
            background-color: white;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        h1 { color: #2c3e50; border-bottom: 3px solid #3498db; padding-bottom: 10px; }
        h2 { color: #34495e; border-bottom: 2px solid #95a5a6; padding-bottom: 8px; margin-top: 30px; }
        h3 { color: #7f8c8d; margin-top: 20px; }
        code {
            background-color: #f4f4f4;
            padding: 2px 6px;
            border-radius: 3px;
            font-family: "Consolas", "Courier New", monospace;
        }
        pre {
            background-color: #2c3e50;
            color: #ecf0f1;
            padding: 15px;
            border-radius: 5px;
            overflow-x: auto;
        }
        pre code {
            background-color: transparent;
            color: #ecf0f1;
            padding: 0;
        }
        table {
            border-collapse: collapse;
            width: 100%;
            margin: 20px 0;
        }
        th, td {
            border: 1px solid #ddd;
            padding: 12px;
            text-align: left;
        }
        th {
            background-color: #3498db;
            color: white;
        }
        tr:nth-child(even) {
            background-color: #f9f9f9;
        }
        a {
            color: #3498db;
            text-decoration: none;
        }
        a:hover {
            text-decoration: underline;
        }
        blockquote {
            border-left: 4px solid #3498db;
            padding-left: 20px;
            margin: 20px 0;
            color: #7f8c8d;
            background-color: #f8f9fa;
            padding: 10px 20px;
        }
        ul, ol {
            margin: 15px 0;
            padding-left: 30px;
        }
        li {
            margin: 8px 0;
        }
    </style>
</head>
<body>
    <div class="container">
<p>﻿# SafeModeDefender v2.1 - 專業級 Windows 安全模式深度清理與修復工具</p>

<p><strong>版本：2.1</strong> <br />
<strong>作者：Manus AI &amp; v0re</strong> <br />
<strong>GitHub：https://github.com/v0re/SafeModeDefender</strong> <br />
<strong>授權：MIT License</strong></p>

<hr />

<h2>目錄</h2>

<ol>
<li><a href="#簡介">簡介</a>
<ul>
<li><a href="#什麼是-safemodedefender">什麼是 SafeModeDefender？</a></li>
<li><a href="#v21-新功能">v2.1 新功能</a></li>
</ul></li>
<li><a href="#安裝與設定">安裝與設定</a></li>
<li><a href="#使用指南">使用指南</a>
<ul>
<li><a href="#模式一交互式選單gui">模式一：交互式選單（GUI）</a></li>
<li><a href="#模式二命令列介面cli">模式二：命令列介面（CLI）</a></li>
<li><a href="#模式三配置檔批次執行">模式三：配置檔批次執行</a></li>
</ul></li>
<li><a href="#核心功能模塊">核心功能模塊</a>
<ul>
<li><a href="#內建模塊">內建模塊</a></li>
<li><a href="#外部工具管理器">外部工具管理器</a></li>
</ul></li>
<li><a href="#使用範例">使用範例</a></li>
<li><a href="#常見問題-faq">常見問題 (FAQ)</a></li>
<li><a href="#貢獻指南">貢獻指南</a></li>
<li><a href="#授權資訊">授權資訊</a></li>
</ol>

<hr />

<h2>1. 簡介</h2>

<h3>什麼是 SafeModeDefender？</h3>

<p>SafeModeDefender 是一個專為 Windows 安全模式設計的專業級開源安全工具包。它旨在幫助使用者，特別是遭受進階持續性威脅（APT）攻擊的受害者，深度檢測和移除潛伏在系統底層的惡意軟體。本工具基於真實世界的威脅情報（Exploit-DB, Shodan, CVE Database, CISA KEV）開發，提供全面、強大的系統防護與修復能力。</p>

<h3>v2.1 新功能</h3>

<p><strong>SafeModeDefender v2.1</strong> 是一個里程碑式的更新，引入了強大的命令列支援和外部工具整合框架，使其從一個單純的掃描工具演變為一個可擴展的綜合性安全平台。</p>

<ul>
<li><strong>完整的命令列支援</strong>：所有內建模塊和外部工具均可透過 <code>--cli</code> 參數在命令列中執行，方便自動化和腳本化操作。</li>
<li><strong>外部工具管理器</strong>：整合了 GitHub 上最優質的開源安全工具（如 WinUtil, Optimizer, TestDisk 等），提供統一的中文化介面，無需使用者單獨學習每個工具。</li>
<li><strong>雙模式介面</strong>：保留了使用者熟悉的交互式選單（GUI），並與新的命令列介面（CLI）無縫切換。</li>
<li><strong>配置檔批次執行</strong>：透過簡單的 JSON 配置檔，可以一次性執行多個掃描和修復任務，實現「一鍵式」安全審計。</li>
<li><strong>Wrapper 封裝架構</strong>：所有外部工具均透過獨立的 PowerShell Wrapper 腳本進行封裝，易於維護和擴展。</li>
</ul>

<h2>2. 離線部署與安裝</h2>

<p>SafeModeDefender v2.2 引入了完整的離線部署支援，確保在沒有網路連線的安全模式下也能正常運作。</p>

<h3>版本選擇</h3>

<p>我們提供兩種版本供您選擇：</p>

<ul>
<li><p><strong>核心版本 (Core)</strong>：<code>SafeModeDefender_v2.2_Core.zip</code> (~10 MB)</p>

<ul>
<li>包含所有內建模塊和無需網路即可運作的外部工具。</li>
<li><strong>不包含 ClamAV 病毒資料庫</strong>。</li>
<li>適合快速部署或在有網路的環境下使用。</li>
</ul></li>
<li><p><strong>完整版本 (Full)</strong>：<code>SafeModeDefender_v2.2_Full.zip</code> (~250 MB)</p>

<ul>
<li>包含所有功能，並<strong>預先打包了最新的 ClamAV 病毒資料庫</strong>。</li>
<li><strong>推薦在完全離線的環境下使用</strong>。</li>
</ul></li>
</ul>

<h3>安裝步驟</h3>

<ol>
<li><strong>下載</strong>：從本專案的 <a href="https://github.com/v0re/SafeModeDefender/releases">GitHub Releases</a> 頁面根據您的需求下載 <code>Core</code> 或 <code>Full</code> 版本的 ZIP 檔案。</li>
<li><strong>解壓縮</strong>：將下載的 ZIP 檔案解壓縮到一個方便存取的位置，例如 <code>C:\Tools\SafeModeDefender</code>。</li>
<li><strong>執行</strong>：右鍵點擊 <code>SafeModeDefender.bat</code>，選擇「以管理員身份執行」。</li>
</ol>

<p><strong>強烈建議</strong>：為了獲得最佳的清理效果和避免惡意軟體干擾，請在 <strong>Windows 安全模式</strong>下執行此工具。</p>

<blockquote>
  <p><strong>如何進入安全模式</strong>：
1. 按住 <code>Shift</code> 鍵並點擊「重新啟動」。
2. 選擇「疑難排解」→「進階選項」→「啟動設定」。
3. 按 <code>F4</code> 進入安全模式，或按 <code>F5</code> 進入含網路功能的安全模式（如果需要下載外部工具）。</p>
</blockquote>

<h2>3. 使用指南</h2>

<p>SafeModeDefender v2.1 提供三種靈活的操作模式。</p>

<h3>離線資源管理</h3>

<p>在主選單選擇 <code>[O]</code> 或使用 CLI 指令 <code>--offline-manager</code> 可以進入離線資源管理器。</p>

<p>```
╔══════════════════════════════════════════════════════════════════════════╗
║                      離線資源狀態檢查                                    ║
╚══════════════════════════════════════════════════════════════════════════╝</p>

<p>網路狀態：✓ 已連線（可以更新資源）</p>

<p>【ClamAV 病毒資料庫】
    狀態：⚠ 已過期（45 天前）
    大小：240.5 MB
    建議：此資源為關鍵資源，建議盡快更新</p>

<p>【WinUtil 腳本和配置】
    狀態：✓ 正常（10 天前）
    大小：0.05 MB
```</p>

<ul>
<li><strong>檢查狀態</strong>：自動檢查所有離線資源的完整性和時效性。</li>
<li><strong>更新資源</strong>：在有網路的環境下，可以一鍵下載或更新所有過期的資源，包括 ClamAV 病毒資料庫。</li>
</ul>

<h3>模式一：交互式選單（GUI）</h3>

<p>這是預設的啟動模式，適合大多數使用者。直接以管理員身份執行 <code>SafeModeDefender.bat</code> 即可進入。</p>

<p>```
╔══════════════════════════════════════════════════════════════════════════╗
║                          主選單                                          ║
╚══════════════════════════════════════════════════════════════════════════╝</p>

<p>[A] 網路服務與端口安全（7 個模塊）
  [B] 系統權限與提權防護（5 個模塊）
  ...
  [I] 防火牆與策略（3 個模塊）</p>

<p>[T] 外部工具管理器
  [O] 離線資源管理
  [X] 執行完整掃描（所有 33 個模塊）
  [R] 查看報告
  [Q] 退出
```</p>

<ul>
<li><strong>A-I</strong>：執行特定類別的內建模塊掃描。</li>
<li><strong>T</strong>：進入外部工具管理器，使用 TestDisk、WinUtil 等強大工具。</li>
<li><strong>X</strong>：執行所有 33 個內建模塊的完整掃描。</li>
<li><strong>R</strong>：查看已生成的掃描報告。</li>
<li><strong>Q</strong>：安全退出。</li>
</ul>

<h3>模式二：命令列介面（CLI）</h3>

<p>此模式專為進階使用者、系統管理員和自動化腳本設計。透過在 <code>SafeModeDefender.bat</code> 後面附加參數來執行。</p>

<p><strong>基本語法</strong>：
<code>bash
SafeModeDefender.bat --cli [動作] [目標] [選項]
</code></p>

<p><strong>常用指令</strong>：</p>

<ul>
<li><p><strong>顯示幫助</strong>：
<code>bash
SafeModeDefender.bat --help
</code></p></li>
<li><p><strong>執行完整掃描</strong>：
<code>bash
SafeModeDefender.bat --cli --action full
</code></p></li>
<li><p><strong>掃描特定類別</strong>（例如：網路安全）：
<code>bash
SafeModeDefender.bat --cli --action scan --category A
</code></p></li>
<li><p><strong>執行特定模塊</strong>：
<code>bash
SafeModeDefender.bat --cli --action scan --module C1_Autorun_Registry_Scan
</code></p></li>
<li><p><strong>使用外部工具</strong>（例如：使用 TestDisk 恢復分區）：
<code>bash
SafeModeDefender.bat --cli --tool testdisk --action recover_partition
</code></p></li>
<li><p><strong>靜默模式自動修復</strong>（不顯示互動提示，自動確認）：
<code>bash
SafeModeDefender.bat --cli --action fix --category F --silent --autofix
</code></p></li>
</ul>

<h3>模式三：配置檔批次執行</h3>

<p>這是 CLI 模式的延伸，允許您透過一個 JSON 配置檔定義一系列要執行的任務，實現「一鍵式」安全審計和修復。</p>

<p><strong>執行方法</strong>：
<code>bash
SafeModeDefender.bat --cli --config &lt;配置檔路徑&gt;
</code></p>

<p><strong>範例配置檔 (<code>Configs/malware_removal.json</code>)</strong>：
<code>json
{
  "name": "惡意軟體移除套件",
  "description": "針對 APT 攻擊的全面惡意軟體檢測和移除流程",
  "tasks": [
    {
      "type": "tool",
      "tool": "clamav",
      "action": "scan"
    },
    {
      "type": "scan",
      "category": "C"
    },
    {
      "type": "scan",
      "category": "D"
    }
  ]
}
</code></p>

<p>此配置檔會依次執行以下任務：
1. 使用 ClamAV 進行病毒掃描。
2. 掃描所有註冊表持久化相關的模塊。
3. 掃描所有檔案系統相關的模塊。</p>

<p>您可以在 <code>Configs/</code> 目錄下找到更多範例配置檔，並根據自己的需求進行修改。</p>

<h2>4. 核心功能模塊</h2>

<h3>內建模塊</h3>

<p>SafeModeDefender 包含 33 個專業級的內建模塊，分為 9 大類，全面覆蓋 Windows 系統的關鍵安全領域。</p>

<p>| 類別代碼 | 類別名稱 | 模塊數量 | 核心功能 |
|:---:|---|:---:|---|
| <strong>A</strong> | 網路服務與端口安全 | 7 | 掃描和強化 SMB, RDP, WinRM 等服務，檢測危險端口 |
| <strong>B</strong> | 系統權限與提權防護 | 5 | 檢查 UAC 設定、管理員帳戶、計畫任務、服務權限 |
| <strong>C</strong> | 註冊表與持久化防護 | 4 | 掃描啟動項、WMI 持久化、瀏覽器擴展、啟動資料夾 |
| <strong>D</strong> | 檔案系統與隱藏威脅 | 4 | 檢測隱藏檔案、ADS 流、可疑執行檔，驗證系統檔案完整性 |
| <strong>E</strong> | 記憶體與漏洞防護 | 3 | 檢查 DEP/ASLR 設定、系統補丁狀態、記憶體保護 |
| <strong>F</strong> | 隱私權與遙測 | 2 | 禁用 Windows 遙測和資料收集服務 |
| <strong>G</strong> | 系統完整性與更新 | 3 | 執行 SFC 和 DISM 掃描，檢測 BIOS 更新 |
| <strong>H</strong> | 環境變數與 Hosts | 2 | 掃描惡意環境變數和被劫持的 Hosts 檔案 |
| <strong>I</strong> | 防火牆與策略 | 3 | 審計防火牆規則，強化防火牆策略 |</p>

<h3>外部工具管理器</h3>

<p>這是 v2.1 的核心功能。我們從 GitHub 上精選了最優秀的開源安全工具，並為其提供了統一的中文化介面和自動化管理。</p>

<p><strong>進入方法</strong>：在主選單選擇 <code>[T]</code> 或使用 CLI 指令 <code>--tool &lt;工具名&gt;</code>。</p>

<p><strong>已整合工具（第一階段）</strong>：</p>

<p>| 工具名稱 | 星級 | 安全模式 | 核心功能 |
|---|:---:|:---:|---|
| <strong>WinUtil</strong> | 47,600+ | ✓ | 全能 Windows 工具，涵蓋系統優化、修復、調整、安全強化等功能 |
| <strong>Optimizer</strong> | 18,000+ | ✓ | 先進的 Windows 隱私和安全增強工具，修復註冊表、禁用服務、關閉遙測 |
| <strong>TestDisk &amp; PhotoRec</strong> | 2,300+ | ✓ | 強大的磁碟分區恢復和引導扇區修復工具，支援 480+ 檔案格式恢復 |
| <strong>ClamAV</strong> | 6,200+ | ✓ | 開源跨平台防毒引擎，檢測木馬、病毒、惡意軟體 |
| <strong>simplewall</strong> | 8,000+ | ✓ | 輕量級 Windows 過濾平台 (WFP) 管理工具 |
| <strong>PrivescCheck</strong> | 3,700+ | ✓ | PowerShell 權限提升漏洞檢測工具 |</p>

<p><strong>使用提示</strong>：
- 工具在首次使用時會自動從官方 GitHub 下載，請確保網路連線正常（建議在含網路功能的安全模式下）。
- 所有工具均保留其原始授權，SafeModeDefender 會在使用時顯示相關資訊並鼓勵您支持原作者。</p>

<h2>5. 使用範例</h2>

<ul>
<li><p><strong>場景一：懷疑感染惡意軟體，進行全面掃描</strong>
<code>bash
SafeModeDefender.bat --cli --config Configs/malware_removal.json
</code></p></li>
<li><p><strong>場景二：系統無法啟動，需要修復引導扇區</strong>
<code>bash
SafeModeDefender.bat --cli --tool testdisk --action repair_boot
</code></p></li>
<li><p><strong>場景三：想要強化系統隱私設定</strong>
<code>bash
SafeModeDefender.bat --cli --config Configs/privacy_hardening.json
</code></p></li>
<li><p><strong>場景四：只想快速檢查註冊表啟動項</strong>
<code>bash
SafeModeDefender.bat --cli --action scan --module C1_Autorun_Registry_Scan
</code></p></li>
</ul>

<h2>6. 常見問題 (FAQ)</h2>

<ul>
<li><p><strong>Q: 為什麼一定要在安全模式下執行？</strong>
A: 在安全模式下，Windows 只會載入最核心的驅動和服務，大多數惡意軟體無法啟動，這使得 SafeModeDefender 可以更徹底地檢測和移除它們，避免在正常模式下被干擾或隱藏。</p></li>
<li><p><strong>Q: 使用外部工具安全嗎？</strong>
A: 我們只整合在 GitHub 上經過驗證、廣受好評的開源專案。所有工具均從官方來源下載，並在使用時顯示其授權和來源。我們不修改工具本身，只提供封裝和統一介面。</p></li>
<li><p><strong>Q: <code>autofix</code> 選項會做什麼？</strong>
A: 該選項會讓 SafeModeDefender 在發現問題時自動執行預設的修復操作，而不會彈出確認提示。這在自動化腳本中非常有用，但請謹慎使用，確保您了解其可能帶來的變更。</p></li>
</ul>

<h2>7. 貢獻指南</h2>

<p>我們歡迎任何形式的貢獻！您可以：
- <strong>報告 Bug</strong>：在使用中遇到任何問題，請在 GitHub Issues 中提交詳細報告。
- <strong>提供建議</strong>：對於新功能或改進有任何想法，歡迎提出。
- <strong>提交程式碼</strong>：如果您想整合新的外部工具或改進現有模塊，請 Fork 本專案並提交 Pull Request。
- <strong>完善文檔</strong>：幫助我們改進文檔，使其更清晰、更易於理解。</p>

<h2>8. 授權資訊</h2>

<p>SafeModeDefender 本身採用 <strong>MIT License</strong> 授權。</p>

<p>整合的外部工具保留其各自的原始授權（如 GNU GPL, Apache License 2.0 等）。SafeModeDefender 在使用這些工具時會明確標示其授權資訊。</p>
    </div>
</body>
</html>
